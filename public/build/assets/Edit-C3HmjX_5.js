import{q as w,r as x,S as N,j as e,a as k}from"./app-CeL17lsE.js";import{T as c,I as o}from"./TextInput-DIzGoC6r.js";import{I as d}from"./InputLabel-CgbnObFB.js";import L from"./DeleteUserForm-D-TPWpER.js";import"./Dropdown-Z3ii0Dws.js";import{B as S}from"./Base-COiCnIHa.js";import"./SecondaryButton-BnY52fMG.js";import"./transition-BOvhBaUy.js";const M=()=>{const{user:h}=w().props,[s,i]=x.useState(!1),[n,r]=x.useState(null),l=x.useRef(null),{data:p,setData:t,post:m,errors:j,processing:u,recentlySuccessful:g,reset:a}=N({avatar:null}),y=v=>{const b=v.target.files[0];if(b){t("avatar",b);const f=new FileReader;f.onload=()=>r(f.result),f.readAsDataURL(b)}},C=v=>{v.preventDefault(),m(route("mon.profile.avatar.update"),{preserveScroll:!0,onSuccess:()=>{i(!1),r(null),a("avatar")}})};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i(!0),className:"btn btn-outline btn-sm",children:"Changer la photo"}),e.jsxs("dialog",{open:s,className:"modal",children:[e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Modifier la photo de profil"}),n?e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:n,alt:"Preview",className:"max-w-xs rounded-lg"})}):e.jsx("div",{className:"flex justify-center items-center bg-gray-100 rounded-lg mb-4",style:{height:"200px"},children:e.jsx("p",{className:"text-gray-500",children:"Aucune image sélectionnée"})}),e.jsx("input",{type:"file",ref:l,onChange:y,accept:"image/*",className:"hidden"}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("button",{onClick:()=>l.current.click(),className:"btn btn-outline",children:n?"Changer":"Sélectionner"}),n&&e.jsx("button",{onClick:()=>{t("avatar",null),r(null)},className:"btn btn-ghost",children:"Supprimer"})]}),j.avatar&&e.jsxs("div",{className:"alert alert-error mb-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:j.avatar})]}),g&&e.jsxs("div",{className:"alert alert-success mb-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Photo mise à jour avec succès!"})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:()=>{i(!1),t("avatar",null),r(null),a()},className:"btn btn-ghost",children:"Annuler"}),e.jsx("button",{onClick:C,className:"btn btn-primary",disabled:!p.avatar||u,children:u?e.jsx("span",{className:"loading loading-spinner"}):"Enregistrer"})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{onClick:()=>i(!1),children:"close"})})]})]})};function F(){const{auth:h}=w().props,s=h.user,[i,n]=x.useState(!1),{data:r,setData:l,patch:p,errors:t,processing:m,recentlySuccessful:j,reset:u}=N({name:s.name,email:s.email,username:s.username||"",bio:s.bio||"",website:s.website||"",birthdate:s.birthdate||"",password:"",password_confirmation:""}),g=a=>{a.preventDefault(),p(route("mon.profile.update"),{preserveScroll:!0,onSuccess:()=>{n(!1),u("password","password_confirmation")}})};return e.jsxs("div",{className:"max-w-3xl mx-auto py-8 px-4",children:[e.jsx(k,{title:"Mon Profil"}),e.jsx("div",{className:"card bg-base-200 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h1",{className:"card-title text-2xl",children:"Mon Profil"}),i?e.jsx("button",{onClick:()=>n(!1),className:"btn btn-ghost btn-sm",children:"Annuler"}):e.jsxs("button",{onClick:()=>n(!0),className:"btn btn-primary btn-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Modifier"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center",children:[e.jsx("div",{className:"avatar mb-4",children:e.jsx("div",{className:"w-32 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2",children:s.avatar?e.jsx("img",{src:`${s.avatar}`,alt:"Photo de profil",onError:a=>{a.target.onerror=null,a.target.src=`https://ui-avatars.com/api/?name=${s.name}&background=random`}}):e.jsx("img",{src:`https://ui-avatars.com/api/?name=${s.name}&background=random`,alt:"Photo par défaut"})})}),i&&e.jsx(M,{})]}),e.jsx("div",{className:"flex-grow",children:i?e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",value:"Nom complet"}),e.jsx(c,{id:"name",name:"name",value:r.name,className:"input input-bordered w-full mt-1",onChange:a=>l("name",a.target.value),required:!0}),e.jsx(o,{message:t.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"username",value:"Nom d'utilisateur"}),e.jsx(c,{id:"username",name:"username",value:r.username,className:"input input-bordered w-full mt-1",onChange:a=>l("username",a.target.value),required:!0}),e.jsx(o,{message:t.username,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"email",value:"Email"}),e.jsx(c,{id:"email",type:"email",name:"email",value:r.email,className:"input input-bordered w-full mt-1",onChange:a=>l("email",a.target.value),required:!0}),e.jsx(o,{message:t.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"bio",value:"Bio"}),e.jsx("textarea",{id:"bio",name:"bio",value:r.bio,onChange:a=>l("bio",a.target.value),className:"textarea textarea-bordered w-full mt-1",rows:"3"}),e.jsx(o,{message:t.bio,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"website",value:"Site web"}),e.jsx(c,{id:"website",type:"url",name:"website",value:r.website,className:"input input-bordered w-full mt-1",onChange:a=>l("website",a.target.value)}),e.jsx(o,{message:t.website,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"birthdate",value:"Date de naissance"}),e.jsx(c,{id:"birthdate",type:"date",name:"birthdate",value:r.birthdate,className:"input input-bordered w-full mt-1",onChange:a=>l("birthdate",a.target.value)}),e.jsx(o,{message:t.birthdate,className:"mt-2"})]})]}),e.jsx("div",{className:"divider",children:"Changer le mot de passe"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"password",value:"Nouveau mot de passe"}),e.jsx(c,{id:"password",type:"password",name:"password",value:r.password,className:"input input-bordered w-full mt-1",onChange:a=>l("password",a.target.value)}),e.jsx(o,{message:t.password,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"password_confirmation",value:"Confirmation"}),e.jsx(c,{id:"password_confirmation",type:"password",name:"password_confirmation",value:r.password_confirmation,className:"input input-bordered w-full mt-1",onChange:a=>l("password_confirmation",a.target.value)}),e.jsx(o,{message:t.password_confirmation,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"btn btn-ghost",children:"Annuler"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?e.jsx("span",{className:"loading loading-spinner"}):"Enregistrer"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:s.name}),e.jsxs("p",{className:"text-gray-500",children:["@",s.username]})]}),s.bio&&e.jsx("p",{className:"",children:s.bio}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("span",{children:s.email})]}),s.website&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"link link-primary",children:s.website})]}),s.birthdate&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:new Date(s.birthdate).toLocaleDateString()})]})]}),e.jsx("hr",{}),e.jsx("div",{className:"divider ",children:"Compte"}),e.jsx("div",{className:"bg-base-100 px-2 py-2  rounded-md",children:e.jsx(L,{})})]})})]})]})})]})}function z({mustVerifyEmail:h,status:s}){return e.jsxs(S,{children:[e.jsx(k,{title:"Mon Profile"}),e.jsx(F,{})]})}export{z as default};
